# ⏰ Waitasecond

<!--Badges-->
<!--⚠️WARNING: This section was generated by https://github.com/hejny/batch-project-editor/blob/main/src/workflows/800-badges/badges.ts so every manual change will be overwritten.-->


[![License of ⏰ Waitasecond](https://img.shields.io/github/license/hejny/waitasecond.svg?style=flat)](https://github.com/hejny/waitasecond/blob/main/LICENSE)
[![NPM Version of ⏰ Waitasecond](https://badge.fury.io/js/waitasecond.svg)](https://www.npmjs.com/package/waitasecond)
[![Quality of package ⏰ Waitasecond](https://packagequality.com/shield/waitasecond.svg)](https://packagequality.com/#?package=waitasecond)
[![Known Vulnerabilities](https://snyk.io/test/github/hejny/waitasecond/badge.svg)](https://snyk.io/test/github/hejny/waitasecond)
[![Issues](https://img.shields.io/github/issues/hejny/waitasecond.svg?style=flat)](https://github.com/hejny/waitasecond/issues)
[![Cypress.io](https://img.shields.io/badge/tested%20with-Cypress-04C38E.svg)](https://www.cypress.io/)

<!--/Badges-->


Waitasecond is a javascript library that makes managing **async code and [Promises](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)** simple and elegant. It provides an await-like API that can be used in the browser, worker, and node environment, making it a powerful tool for any project. Additionally, the library is fully typed, allowing developers to have complete confidence in the reliability of their code. With Waitasecond, developers can easily and reliably handle any asynchronous task with ease.


<!--Wallpaper-->
<!--⚠️WARNING: This section was generated by https://github.com/hejny/batch-project-editor/blob/main/src//workflows/315-ai-generated-wallpaper/4-aiGeneratedWallpaperUseInReadme.ts so every manual change will be overwritten.-->
[![Wallpaper of ⏰ Waitasecond](assets/ai/wallpaper/gallery/43a3e1f3-bde0-4747-bf6b-04158e54f112-0_0.png)](https://www.midjourney.com/app/jobs/43a3e1f3-bde0-4747-bf6b-04158e54f112)
<!--/Wallpaper-->

## 🔥 Install

Install from [NPM](https://www.npmjs.com/package/waitasecond)

```bash
npm i waitasecond
```

## 🕛 Await forTimeout _([setTimeout](https://developer.mozilla.org/en-US/docs/Web/API/setTimeout) equivalent)_

In JavaScript, there is an elegant way how to write asynchronous code with **async/await** syntax construct. Every internal function and library is heading forward to be compatible with Promises and deprecating its old callback type.
But there are some **relicts from [callback hell](http://callbackhell.com/)** like **setTimeout, requestAnimationFrame,...**. Waitasecond has motivation to turn this into elegant syntax:

```typescript
import { forTimeout } from 'waitasecond/forTimeout';

console.log(`⏳ This is logged immediately.`);
await forTimeout(500);
console.log(`⌛ And this after 500 milliseconds.`);
await forTimeout(666);
console.log(`😈 Wow, I have escaped from callback hell`);
```

[📖Documentation](https://hejny.github.io/waitasecond/modules.html#forTime)
[💻Code](https://github.com/hejny/waitasecond/blob/main/src/functions/forTime.ts)

## 🕧 Await forImmediate _([setImmediate](https://developer.mozilla.org/en-US/docs/Web/API/Window/setImmediate) equivalent)_

```typescript
import { forImmediate } from 'waitasecond/forImmediate';

async function doSomething() {
    console.log(`🍏 foo`);
    await forImmediate();
    console.log(`🍎 bar`);
}

doSomething();
doSomething();

// 🍏 foo
// 🍏 foo
// 🍎 bar
// 🍎 bar

await doSomething();
await doSomething();

// 🍏 foo
// 🍎 bar
// 🍏 foo
// 🍎 bar
```

_Note: Despite window.setImmediate is a non-standard feature and it is not working in node, function **forImmediate is working in all environments**_
_Note: If you want to use an equivalent of [setInterval](https://developer.mozilla.org/en-US/docs/Web/API/setInterval), see [RxJS interval](https://rxjs.dev/api/index/function/interval)._

[📖Documentation](https://hejny.github.io/waitasecond/modules.html#forImmediate)
[💻Code](https://github.com/hejny/waitasecond/blob/main/src/functions/forImmediate.ts)

## 🕐 Await forAnimationFrame _([requestAnimationFrame](https://developer.mozilla.org/en-US/docs/Web/API/window/requestAnimationFrame) equivalent)_

With forAnimationFrame you can write nice looking **render**/update/whatever **loops**.

```typescript
import { forAnimationFrame } from 'waitasecond/forAnimationFrame';

while (
    true /* ← Normally, this would be 💩 code, but with forAnimationFrame it is a nicer syntax version of requestAnimationFrame*/
) {
    const now = await forAnimationFrame();

    updateScene(now);
    renderScene(now);
}
```

_Note: This is working only in a browser environment._

[📖Documentation](https://hejny.github.io/waitasecond/modules.html#forAnimationFrame)
[💻Code](https://github.com/hejny/waitasecond/blob/main/src/functions/forAnimationFrame.ts)

## 🕜 Await forEver

forEver function returns a promise which never resolves or rejects. It is an elegant way to test what happened if some part of asynchronous code stuck (for example, fetch call).

```typescript
import { forEver } from 'waitasecond/forEver';

await forEver();
console.log(`🧟 This will never ever happen.`);
```

[📖Documentation](https://hejny.github.io/waitasecond/modules.html#forEver)
[💻Code](https://github.com/hejny/waitasecond/blob/main/src/functions/forEver.ts)

## 🕑 Await forTimeSynced

**forTimeSynced** is an ideal way how to do periodical ticking in an unstable environment.
For example, if you want to run a process every 10 minutes on a server, but PM2 is restarting a server unexpectedly.

```typescript
import { forTimeSynced } from 'waitasecond/forTimeSynced';

while (true) {
    await forTimeSynced(10 /* Minutes */ * 60 * 1000);
    console.log(
        `⌛ This will be logged every 10 minutes according to computer time. So it fires for example on 12:00, 12:10, 12:20,...`,
    );
}
```

[📖Documentation](https://hejny.github.io/waitasecond/modules.html#forTimeSynced)
[💻Code](https://github.com/hejny/waitasecond/blob/main/src/functions/forTimeSynced.ts)

## 🕝 Await forValueDefined

```typescript
import { forValueDefined } from 'waitasecond/forValueDefined';

const firstName = forValueDefined(() => data.firstName);
```

_Note: This is not definitely the ideal way how to wait for things. But it can be helpful if you want to "observe" some mutating object which do not support it natively._

[📖Documentation](https://hejny.github.io/waitasecond/modules.html#forValueDefined)
[💻Code](https://github.com/hejny/waitasecond/blob/main/src/functions/forValueDefined.ts)

## 🕒 Await forImage

```typescript
import { forImage } from 'waitasecond';

await forImage(document.querySelector('.logo'));
console.log(`🖼️ Now I can be sure that the logo is loaded.`);

// ...
await renderToPdf(document.body);
// ...
```

[📖Documentation](https://hejny.github.io/waitasecond/modules.html#forImage)
[💻Code](https://github.com/hejny/waitasecond/blob/main/src/functions/forImage.ts)

## 🕒 Await forAllImagesInElement

```typescript
import { forImagesReady } from 'waitasecond/forImagesReady';

await forImagesReady(document.body);
console.log(`🖼️ Now I can be sure that all images in body are loaded.`);

// ...
await renderToPdf(document.body);
// ...
```

[📖Documentation](https://hejny.github.io/waitasecond/modules.html#forImagesReady)
[💻Code](https://github.com/hejny/waitasecond/blob/main/src/functions/forImagesReady.ts)

<!--Contributing-->
<!--⚠️WARNING: This section was generated by https://github.com/hejny/batch-project-editor/blob/main/src/workflows/810-contributing/contributing.ts so every manual change will be overwritten.-->

## 🖋️ Contributing

I am open to pull requests, feedback, and suggestions. Or if you like this utility, you can [☕ buy me a coffee](https://www.buymeacoffee.com/hejny) or [donate via cryptocurrencies](https://github.com/hejny/hejny/blob/main/documents/crypto.md).

You can also ⭐ star the waitasecond package, [follow me on GitHub](https://github.com/hejny) or [various other social networks](https://www.pavolhejny.com/contact/).

<!--/Contributing-->

<!--Partners-->
<!--⚠️WARNING: This section was generated by https://github.com/hejny/batch-project-editor/blob/main/src/workflows/820-partners/partners.ts so every manual change will be overwritten.-->

## ✨ Partners


<a href="https://collboard.com/">
  <img src="https://collboard.fra1.cdn.digitaloceanspaces.com/assets/18.12.1/logo-small.png" alt="Collboard logo" width="50"  />
</a>
&nbsp;&nbsp;&nbsp;
<a href="https://czech.events/">
  <img src="https://czech.events/design/logos/czech.events.transparent-logo.png" alt="Czech.events logo" width="50"  />
</a>
&nbsp;&nbsp;&nbsp;
<a href="https://sigmastamp.ml/">
  <img src="https://www.sigmastamp.ml/sigmastamp-logo.white.svg" alt="SigmaStamp logo" width="50"  />
</a>


[Become a partner](https://www.pavolhejny.com/contact/)

<!--/Partners-->
